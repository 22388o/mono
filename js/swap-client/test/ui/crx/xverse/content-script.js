(()=>{"use strict";var e;!function(e){e.authenticationRequest="stacksAuthenticationRequest",e.signatureRequest="signatureRequest",e.structuredDataSignatureRequest="structuredDataSignatureRequest",e.transactionRequest="stacksTransactionRequest",e.getAddressRequest="SatsAddressRequest",e.signPsbtRequest="SatsPsbtRequest",e.signMessageRequest="SatsSignMessage",e.sendBtcRequest="SatsSendBtcRequest",e.createInscriptionRequest="SatsCreateInscriptionRequest"}(e||(e={}));const t="xverse-wallet";var s,n,a;!function(e){e.transactionRequest="transactionRequest",e.transactionResponse="transactionResponse",e.authenticationRequest="authenticationRequest",e.authenticationResponse="authenticationResponse",e.signatureRequest="signatureRequest",e.signatureResponse="signatureResponse",e.structuredDataSignatureRequest="structuredDataSignatureRequest",e.structuredDataSignatureResponse="structuredDataSignatureResponse"}(s||(s={})),function(e){e.RequestDerivedStxAccounts="RequestDerivedStxAccounts",e.ShareInMemoryKeyToBackground="ShareInMemoryKeyToBackground",e.RequestInMemoryKeys="RequestInMemoryKeys",e.RemoveInMemoryKeys="RemoveInMemoryKeys",e.OriginatingTabClosed="OriginatingTabClosed"}(n||(n={})),function(e){e.getAddressRequest="getAddressRequest",e.getAddressResponse="getAddressResponse",e.signPsbtRequest="signPsbtRequest",e.signPsbtResponse="signPsbtResponse",e.signMessageRequest="signMessageRequest",e.signMessageResponse="signMessageResponse",e.sendBtcRequest="sendBtcRequest",e.sendBtcResponse="sendBtcResponse",e.createInscriptionRequest="createInscriptionRequest",e.createInscriptionResponse="createInscriptionResponse"}(a||(a={}));const u=e=>!(e.source instanceof MessagePort||e.source instanceof ServiceWorker)?e.source:null;var r;!function(e){e.Home="/",e.TransactionRequest="/transaction-request",e.AuthenticationRequest="/authentication-request",e.SignatureRequest="/signature-request",e.AddressRequest="/btc-select-address-request",e.SignBtcTx="/psbt-signing-request",e.SendBtcTx="/btc-send-request",e.CreateInscription="/create-inscription"}(r||(r={}));const i=r;let o;function c({payload:e,method:s}){var n;n={method:s,payload:e,source:t},o.postMessage(n)}window.addEventListener("message",(e=>{const{data:t}=e;if("xverse-app"===t.source){const{method:s}=t;if("getURL"===s){const t=chrome.runtime.getURL("options.html"),s=u(e);s?.postMessage({url:t,method:"getURLResponse",source:"xverse-extension"},e.origin)}}})),function e(){o=chrome.runtime.connect({name:"xverse-content-script"}),o.onDisconnect.addListener(e)}(),chrome.runtime.onMessage.addListener((e=>{e.source===t&&window.postMessage(e,window.location.origin)})),document.addEventListener(e.authenticationRequest,(e=>{c({path:i.AuthenticationRequest,payload:e.detail.authenticationRequest,urlParam:"authRequest",method:s.authenticationRequest})})),document.addEventListener(e.transactionRequest,(e=>{c({path:i.TransactionRequest,payload:e.detail.transactionRequest,urlParam:"request",method:s.transactionRequest})})),document.addEventListener(e.signatureRequest,(e=>{c({path:i.SignatureRequest,payload:e.detail.signatureRequest,urlParam:"request",method:s.signatureRequest})})),document.addEventListener(e.structuredDataSignatureRequest,(e=>{c({path:i.SignatureRequest,payload:e.detail.signatureRequest,urlParam:"request",method:s.structuredDataSignatureRequest})})),document.addEventListener(e.getAddressRequest,(e=>{c({path:i.AddressRequest,payload:e.detail.btcAddressRequest,urlParam:"addressRequest",method:a.getAddressRequest})})),document.addEventListener(e.signPsbtRequest,(e=>{c({path:i.SignBtcTx,payload:e.detail.signPsbtRequest,urlParam:"signPsbtRequest",method:a.signPsbtRequest})})),document.addEventListener(e.signMessageRequest,(e=>{c({path:i.SignatureRequest,payload:e.detail.signMessageRequest,urlParam:"signMessageRequest",method:a.signMessageRequest})})),document.addEventListener(e.sendBtcRequest,(e=>{c({path:i.SendBtcTx,payload:e.detail.sendBtcRequest,urlParam:"sendBtcRequest",method:a.sendBtcRequest})})),document.addEventListener(e.createInscriptionRequest,(e=>{c({path:i.CreateInscription,payload:e.detail.createInscriptionRequest,urlParam:"createInscriptionRequest",method:a.createInscriptionRequest})}));const d=document.createElement("script");d.src=chrome.runtime.getURL("inpage.js"),d.id="xverse-wallet-provider",document.body.appendChild(d)})();